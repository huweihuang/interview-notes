# Golang面试题

## 1. 并发篇

### 1.1. 进程、线程、协程的区别

**- 进程**

进程是资源分配的单位，即资源隔离。同进程内的所有线程可以共同访问该进程的资源，每个进程都有自己的独立内存空间，不同进程通过进程间通信来通信。由于进程比较重量，占据独立的内存，所以上下文进程间的切换开销（栈、寄存器、虚拟内存、文件句柄等）比较大，但相对比较稳定安全。

**- 线程**

线程是独立调度和运行的基本单位，线程间通信主要通过共享内存，上下文切换很快，资源开销较少，但相比进程不够稳定容易丢失数据。

**- 协程**

**协程是一种用户态的轻量级线程，**协程的调度完全由用户控制。协程没有线程的上下文切换消耗，

### 1.2. 并发和并行的区别

- 并发（**Concurrent**）：并存的，一个CPU同时做多件事，实际是在不断地切换时间片去做多件事，看起来像是同时在做多件事。例如：CPU在时间片1中做任务A，时间片2中做任务B，时间片3中再做任务A，时间片4中再做任务B，不断在多个任务之间来回切换执行。

- 并行（**Parallel**）：平行的，多个CPU同时做多件事，CPU1做任务A，CPU2做任务B，不同CPU做不同时的任务，互不干扰。

并行由于有多个CPU分别做不同的任务，并不会互相抢占资源。并发是由一个CPU做多个任务，因此存在抢占资源，切换任务的操作。

## 2. 概念篇

### 2.1. defer在return和panic的执行顺序

**defer**（中文翻译：推迟）主要用来推迟执行，即在函数结束之前执行，其中函数结束主要包括return和panic两种情况，即正常结束和异常结束。

defer的执行顺序是倒序依次执行不同的defer语句。

defer主要的作用是用来释放资源（关闭文件等）、清理数据、记录日志、异常处理等，因此不管函数是否正常结束，都会在结束前逆序执行defer语句。

## 3. 原理篇

## 3.1. goroutine调度

## 3.2. 垃圾回收

## 3.3. 内存分配



## 4. 源码篇

## 4.1. 切片的实现原理

## 4.2. map的实现原理

## 4.3. channel为什么是线程安全的？

